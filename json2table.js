const dataFromAPI = JSON.parse(JSON.stringify({"payments": [{"id": "LDLgdU1lzVQz8yk7TZQNfii1aEbZY","created_at": "2023-10-15T12:35:15.230Z","updated_at": "2023-10-15T12:35:15.308Z","amount_money": {"amount": 12500,"currency": "USD"},"status": "COMPLETED","source_type": "EXTERNAL","location_id": "LSZSAAS0KWEKA","order_id": "tZiDwRIjeSIn2kiNcJgoTGdwcf4F","total_money": {"amount": 12500,"currency": "USD"},"capabilities": ["EDIT_AMOUNT_UP","EDIT_AMOUNT_DOWN","EDIT_TIP_AMOUNT_UP","EDIT_TIP_AMOUNT_DOWN"],"external_details": {"type": "CARD","source": "Developer Control Panel"},"receipt_number": "LDLg","receipt_url": "https://squareupsandbox.com/receipt/preview/LDLgdU1lzVQz8yk7TZQNfii1aEbZY","application_details": {"square_product": "ECOMMERCE_API","application_id": "sandbox-sq0idb-lky4CaPAWmDnHY3YtYxINg"},"version_token": "BOb32OVa1Dkuh0yJ1Cb0t8XJLeonEQXMDVT1VylQFm75o"},{"id": "DH3c3p8uTqwVWaepaofEWdIlITGZY","created_at": "2023-10-14T07:51:07.400Z","updated_at": "2023-10-14T07:51:08.377Z","amount_money": {"amount": 19,"currency": "USD"},"status": "COMPLETED","delay_duration": "PT168H","source_type": "CARD","card_details": {"status": "CAPTURED","card": {"card_brand": "VISA","last_4": "5858","exp_month": 10,"exp_year": 2025,"fingerprint": "sq-1-mWNWtR-2y8BZf1y2oxRCggFhEX4tdgx75TAo-q_0OOoIK5RVzErS2H3TMyKd5q7sDQ","card_type": "CREDIT","prepaid_type": "NOT_PREPAID","bin": "453275"},"entry_method": "KEYED","cvv_status": "CVV_ACCEPTED","avs_status": "AVS_ACCEPTED","statement_description": "SQ *DEFAULT TEST ACCOUNT","card_payment_timeline": {"authorized_at": "2023-10-14T07:51:07.514Z","captured_at": "2023-10-14T07:51:07.627Z"}},"location_id": "LSZSAAS0KWEKA","order_id": "9zZMnseU9vfMH723DBmN6Y39xh4F","processing_fee": [{"effective_at": "2023-10-14T09:51:08.000Z","type": "INITIAL","amount_money": {"amount": 19,"currency": "USD"}}],"buyer_email_address": "saurabhksinha900@gmail.com","total_money": {"amount": 19,"currency": "USD"},"approved_money": {"amount": 19,"currency": "USD"},"receipt_number": "DH3c","receipt_url": "https://squareupsandbox.com/receipt/preview/DH3c3p8uTqwVWaepaofEWdIlITGZY","delay_action": "CANCEL","delayed_until": "2023-10-21T07:51:07.400Z","application_details": {"square_product": "ECOMMERCE_API","application_id": "sandbox-sq0idb-6mSHHfOTZmbgAqe4uh7MtQ"},"version_token": "UbjOHALkEr2WVGb2Rtbe9UooGOS0oAvZRJMS0Y4vFUo6o"},{"id": "PjiArQbLddrpQrWfaRDvJQxVxYOZY","created_at": "2023-10-14T07:49:26.030Z","updated_at": "2023-10-14T07:49:27.093Z","amount_money": {"amount": 19,"currency": "USD"},"status": "COMPLETED","delay_duration": "PT168H","source_type": "CARD","card_details": {"status": "CAPTURED","card": {"card_brand": "VISA","last_4": "5858","exp_month": 10,"exp_year": 2025,"fingerprint": "sq-1-mWNWtR-2y8BZf1y2oxRCggFhEX4tdgx75TAo-q_0OOoIK5RVzErS2H3TMyKd5q7sDQ","card_type": "CREDIT","prepaid_type": "NOT_PREPAID","bin": "453275"},"entry_method": "KEYED","cvv_status": "CVV_ACCEPTED","avs_status": "AVS_ACCEPTED","statement_description": "SQ *DEFAULT TEST ACCOUNT","card_payment_timeline": {"authorized_at": "2023-10-14T07:49:26.144Z","captured_at": "2023-10-14T07:49:26.211Z"}},"location_id": "LSZSAAS0KWEKA","order_id": "v8vVOBCwT7nuaAhEKFizdItzsh4F","processing_fee": [{"effective_at": "2023-10-14T09:49:27.000Z","type": "INITIAL","amount_money": {"amount": 19,"currency": "USD"}}],"buyer_email_address": "saurabhksinha900@gmail.com","total_money": {"amount": 19,"currency": "USD"},"approved_money": {"amount": 19,"currency": "USD"},"receipt_number": "PjiA","receipt_url": "https://squareupsandbox.com/receipt/preview/PjiArQbLddrpQrWfaRDvJQxVxYOZY","delay_action": "CANCEL","delayed_until": "2023-10-21T07:49:26.030Z","application_details": {"square_product": "ECOMMERCE_API","application_id": "sandbox-sq0idb-6mSHHfOTZmbgAqe4uh7MtQ"},"version_token": "PJPsim3NqsgbFVc9vNuZ3EsnaFAZSJzPALBNMWMclvE6o"},{"id": "Nw52InqeDjPFIG9Ki62GWnmjkvbZY","created_at": "2023-10-14T07:42:10.870Z","updated_at": "2023-10-14T07:42:10.943Z","amount_money": {"amount": 12500,"currency": "USD"},"status": "COMPLETED","source_type": "EXTERNAL","location_id": "LSZSAAS0KWEKA","order_id": "tZKD2FEaH9gPkLhm3oFF5xWtMa4F","total_money": {"amount": 12500,"currency": "USD"},"capabilities": ["EDIT_AMOUNT_UP","EDIT_AMOUNT_DOWN","EDIT_TIP_AMOUNT_UP","EDIT_TIP_AMOUNT_DOWN"],"external_details": {"type": "CARD","source": "Developer Control Panel"},"receipt_number": "Nw52","receipt_url": "https://squareupsandbox.com/receipt/preview/Nw52InqeDjPFIG9Ki62GWnmjkvbZY","application_details": {"square_product": "ECOMMERCE_API","application_id": "sandbox-sq0idb-lky4CaPAWmDnHY3YtYxINg"},"version_token": "mhf1m0q5XW2TjUldrxIVWfILN8RcgeiBrpsiA4FAOxO6o"},{"id": "PL8BiSEHsiS7zceRz3aZieDWl1BZY","created_at": "2023-10-09T22:38:25.395Z","updated_at": "2023-10-09T22:38:27.571Z","amount_money": {"amount": 1,"currency": "USD"},"status": "COMPLETED","delay_duration": "PT168H","source_type": "CARD","card_details": {"status": "CAPTURED","card": {"card_brand": "VISA","last_4": "5858","exp_month": 10,"exp_year": 2025,"fingerprint": "sq-1-mWNWtR-2y8BZf1y2oxRCggFhEX4tdgx75TAo-q_0OOoIK5RVzErS2H3TMyKd5q7sDQ","card_type": "CREDIT","prepaid_type": "NOT_PREPAID","bin": "453275"},"entry_method": "KEYED","cvv_status": "CVV_ACCEPTED","avs_status": "AVS_ACCEPTED","statement_description": "SQ *DEFAULT TEST ACCOUNT","card_payment_timeline": {"authorized_at": "2023-10-09T22:38:25.506Z","captured_at": "2023-10-09T22:38:25.605Z"}},"location_id": "LSZSAAS0KWEKA","order_id": "VFwi5it3zEZaKu5B2iIUjhbZEb4F","processing_fee": [{"effective_at": "2023-10-10T00:38:27.000Z","type": "INITIAL","amount_money": {"amount": 1,"currency": "USD"}}],"buyer_email_address": "saurabhksinha900@gmail.com","total_money": {"amount": 1,"currency": "USD"},"approved_money": {"amount": 1,"currency": "USD"},"receipt_number": "PL8B","receipt_url": "https://squareupsandbox.com/receipt/preview/PL8BiSEHsiS7zceRz3aZieDWl1BZY","delay_action": "CANCEL","delayed_until": "2023-10-16T22:38:25.395Z","application_details": {"square_product": "ECOMMERCE_API","application_id": "sandbox-sq0idb-6mSHHfOTZmbgAqe4uh7MtQ"},"version_token": "ohcFm9uzAxZc3BXI1PfcbkVx6Pb9xqziF62IwJhEjmS6o"},{"id": "hqXpA9fXExqFufmmkmQWsnbmVbMZY","created_at": "2023-10-09T22:38:08.147Z","updated_at": "2023-10-09T22:38:09.378Z","amount_money": {"amount": 19,"currency": "USD"},"status": "COMPLETED","delay_duration": "PT168H","source_type": "CARD","card_details": {"status": "CAPTURED","card": {"card_brand": "VISA","last_4": "5858","exp_month": 10,"exp_year": 2025,"fingerprint": "sq-1-mWNWtR-2y8BZf1y2oxRCggFhEX4tdgx75TAo-q_0OOoIK5RVzErS2H3TMyKd5q7sDQ","card_type": "CREDIT","prepaid_type": "NOT_PREPAID","bin": "453275"},"entry_method": "KEYED","cvv_status": "CVV_ACCEPTED","avs_status": "AVS_ACCEPTED","statement_description": "SQ *DEFAULT TEST ACCOUNT","card_payment_timeline": {"authorized_at": "2023-10-09T22:38:08.256Z","captured_at": "2023-10-09T22:38:08.325Z"}},"location_id": "LSZSAAS0KWEKA","order_id": "11kY5NFEFfWnslgU5ankcoRaRg4F","processing_fee": [{"effective_at": "2023-10-10T00:38:09.000Z","type": "INITIAL","amount_money": {"amount": 19,"currency": "USD"}}],"buyer_email_address": "saurabhksinha900@gmail.com","total_money": {"amount": 19,"currency": "USD"},"approved_money": {"amount": 19,"currency": "USD"},"receipt_number": "hqXp","receipt_url": "https://squareupsandbox.com/receipt/preview/hqXpA9fXExqFufmmkmQWsnbmVbMZY","delay_action": "CANCEL","delayed_until": "2023-10-16T22:38:08.147Z","application_details": {"square_product": "ECOMMERCE_API","application_id": "sandbox-sq0idb-6mSHHfOTZmbgAqe4uh7MtQ"},"version_token": "bP3q9Yn2eeDcqLtEPfv9CAGJD3JKtZLYNFMXjUyBuWf6o"},{"id": "tMFTpJII0Rxu0f6NDzltJafKWHBZY","created_at": "2023-10-09T22:36:27.287Z","updated_at": "2023-10-09T22:36:28.313Z","amount_money": {"amount": 1,"currency": "USD"},"status": "COMPLETED","delay_duration": "PT168H","source_type": "CARD","card_details": {"status": "CAPTURED","card": {"card_brand": "VISA","last_4": "5858","exp_month": 10,"exp_year": 2025,"fingerprint": "sq-1-mWNWtR-2y8BZf1y2oxRCggFhEX4tdgx75TAo-q_0OOoIK5RVzErS2H3TMyKd5q7sDQ","card_type": "CREDIT","prepaid_type": "NOT_PREPAID","bin": "453275"},"entry_method": "KEYED","cvv_status": "CVV_ACCEPTED","avs_status": "AVS_ACCEPTED","statement_description": "SQ *DEFAULT TEST ACCOUNT","card_payment_timeline": {"authorized_at": "2023-10-09T22:36:27.460Z","captured_at": "2023-10-09T22:36:27.541Z"}},"location_id": "LSZSAAS0KWEKA","order_id": "tPbUB9Uslw2sbBqdUgnfkcDRxh4F","processing_fee": [{"effective_at": "2023-10-10T00:36:28.000Z","type": "INITIAL","amount_money": {"amount": 1,"currency": "USD"}}],"buyer_email_address": "saurabhksinha900@gmail.com","total_money": {"amount": 1,"currency": "USD"},"approved_money": {"amount": 1,"currency": "USD"},"receipt_number": "tMFT","receipt_url": "https://squareupsandbox.com/receipt/preview/tMFTpJII0Rxu0f6NDzltJafKWHBZY","delay_action": "CANCEL","delayed_until": "2023-10-16T22:36:27.287Z","application_details": {"square_product": "ECOMMERCE_API","application_id": "sandbox-sq0idb-6mSHHfOTZmbgAqe4uh7MtQ"},"version_token": "F9UuGtNCyNVWtNpN30EEarKYV9BsmrHXMKbBq97OEMz6o"},{"id": "vnaHp557Xkn4F3W6UIHLZehA32YZY","created_at": "2023-10-09T22:36:00.519Z","updated_at": "2023-10-09T22:36:02.059Z","amount_money": {"amount": 19,"currency": "USD"},"status": "COMPLETED","delay_duration": "PT168H","source_type": "CARD","card_details": {"status": "CAPTURED","card": {"card_brand": "VISA","last_4": "5858","exp_month": 10,"exp_year": 2025,"fingerprint": "sq-1-mWNWtR-2y8BZf1y2oxRCggFhEX4tdgx75TAo-q_0OOoIK5RVzErS2H3TMyKd5q7sDQ","card_type": "CREDIT","prepaid_type": "NOT_PREPAID","bin": "453275"},"entry_method": "KEYED","cvv_status": "CVV_ACCEPTED","avs_status": "AVS_ACCEPTED","statement_description": "SQ *DEFAULT TEST ACCOUNT","card_payment_timeline": {"authorized_at": "2023-10-09T22:36:00.695Z","captured_at": "2023-10-09T22:36:00.777Z"}},"location_id": "LSZSAAS0KWEKA","order_id": "LShoMBtpz2aEKYylMV1wSzP1gb4F","processing_fee": [{"effective_at": "2023-10-10T00:36:02.000Z","type": "INITIAL","amount_money": {"amount": 19,"currency": "USD"}}],"buyer_email_address": "saurabhksinha900@gmail.com","total_money": {"amount": 19,"currency": "USD"},"approved_money": {"amount": 19,"currency": "USD"},"receipt_number": "vnaH","receipt_url": "https://squareupsandbox.com/receipt/preview/vnaHp557Xkn4F3W6UIHLZehA32YZY","delay_action": "CANCEL","delayed_until": "2023-10-16T22:36:00.519Z","application_details": {"square_product": "ECOMMERCE_API","application_id": "sandbox-sq0idb-6mSHHfOTZmbgAqe4uh7MtQ"},"version_token": "ZIoSitnjD4PbmR9Mc5dTXlQ15rvqw0xUqSSNUxAJK9K6o"},{"id": "vx3TjkaPpA3yeMLVgon1QIpBpOaZY","created_at": "2023-10-09T22:06:59.402Z","updated_at": "2023-10-09T22:07:00.363Z","amount_money": {"amount": 19,"currency": "USD"},"status": "COMPLETED","delay_duration": "PT168H","source_type": "CARD","card_details": {"status": "CAPTURED","card": {"card_brand": "VISA","last_4": "5858","exp_month": 10,"exp_year": 2025,"fingerprint": "sq-1-mWNWtR-2y8BZf1y2oxRCggFhEX4tdgx75TAo-q_0OOoIK5RVzErS2H3TMyKd5q7sDQ","card_type": "CREDIT","prepaid_type": "NOT_PREPAID","bin": "453275"},"entry_method": "KEYED","cvv_status": "CVV_ACCEPTED","avs_status": "AVS_ACCEPTED","statement_description": "SQ *DEFAULT TEST ACCOUNT","card_payment_timeline": {"authorized_at": "2023-10-09T22:06:59.511Z","captured_at": "2023-10-09T22:06:59.586Z"}},"location_id": "LSZSAAS0KWEKA","order_id": "9BeLZPz24M9F9nP3IGvKL0Uwpd4F","processing_fee": [{"effective_at": "2023-10-10T00:07:00.000Z","type": "INITIAL","amount_money": {"amount": 19,"currency": "USD"}}],"buyer_email_address": "saurabhksinha900@gmail.com","total_money": {"amount": 19,"currency": "USD"},"approved_money": {"amount": 19,"currency": "USD"},"receipt_number": "vx3T","receipt_url": "https://squareupsandbox.com/receipt/preview/vx3TjkaPpA3yeMLVgon1QIpBpOaZY","delay_action": "CANCEL","delayed_until": "2023-10-16T22:06:59.402Z","application_details": {"square_product": "ECOMMERCE_API","application_id": "sandbox-sq0idb-6mSHHfOTZmbgAqe4uh7MtQ"},"version_token": "F8rCfxSx0J5TYBFu3zn3EWD7muytKTvItr3hxPGarxX6o"},{"id": "t4vtpzBfEBiPrBSCpAqH7OzRX4KZY","created_at": "2023-10-09T21:57:30.632Z","updated_at": "2023-10-09T21:57:32.389Z","amount_money": {"amount": 100,"currency": "USD"},"status": "COMPLETED","delay_duration": "PT168H","source_type": "CARD","card_details": {"status": "CAPTURED","card": {"card_brand": "VISA","last_4": "5858","exp_month": 10,"exp_year": 2025,"fingerprint": "sq-1-mWNWtR-2y8BZf1y2oxRCggFhEX4tdgx75TAo-q_0OOoIK5RVzErS2H3TMyKd5q7sDQ","card_type": "CREDIT","prepaid_type": "NOT_PREPAID","bin": "453275"},"entry_method": "KEYED","cvv_status": "CVV_ACCEPTED","avs_status": "AVS_ACCEPTED","statement_description": "SQ *DEFAULT TEST ACCOUNT","card_payment_timeline": {"authorized_at": "2023-10-09T21:57:30.742Z","captured_at": "2023-10-09T21:57:30.803Z"}},"location_id": "LSZSAAS0KWEKA","order_id": "hJprnow2jTekXIMNHnwsEMJUFb4F","processing_fee": [{"effective_at": "2023-10-09T23:57:32.000Z","type": "INITIAL","amount_money": {"amount": 33,"currency": "USD"}}],"total_money": {"amount": 100,"currency": "USD"},"approved_money": {"amount": 100,"currency": "USD"},"receipt_number": "t4vt","receipt_url": "https://squareupsandbox.com/receipt/preview/t4vtpzBfEBiPrBSCpAqH7OzRX4KZY","delay_action": "CANCEL","delayed_until": "2023-10-16T21:57:30.632Z","application_details": {"square_product": "ECOMMERCE_API","application_id": "sandbox-sq0idb-6mSHHfOTZmbgAqe4uh7MtQ"},"version_token": "w09ea0HAIw0U81SiQ22EULHfOMhlC5tOYshHS5sG98x6o"}]}));

function jsonToTable(data) {
  if (!data || data.length === 0) {
    return ''; // Handle empty data
  }

  // Extract table headers from the first object in the JSON array
  const headers = Object.keys(data[0]);

  // Create the table header row
  let table = `<thead><tr>${headers.map(header => `<th>${header}</th>`).join('')}</tr></thead>`;
  
  // Create the table body rows
  table += '<tbody>';
  data.forEach(row => {
    table += '<tr>';
    headers.forEach(header => {
      table += `<td>${row[header]}</td>`;
    });
    table += '</tr>';
  });
  table += '</tbody>';

  // Wrap the table in HTML or return as needed
  return `<table>${table}</table>`;
}

const table = jsonToTable(dataFromAPI);
console.log(table);
